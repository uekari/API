<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/課題提出用/次こそ！.css">
    <title>Movie App</title>
</head>

<body>

    <!-- 表示 -->
    <header>
        <form id=" form">
            <input type="text" id="search" class="search" placeholder="Search">
        </form>
    </header>

    <main id="main">aaa</main>


    <!-- js -->

    <script>

        // // 最初にリクエスト先を定数で定義
        // // Discover
        // const API_URL = 'https://api.themoviedb.org/3/movie/550?api_key=af224ec1282df7f97fcdecabe78c99ad'
        // // Images
        // const IMG_PATH = 'https://image.tmdb.org/t/p/w1280'
        // // Search
        // const SEARCH_API = 'https://api.themoviedb.org/3/search/movie?api_key=3fd2be6f0c70a2a598f084ddfb75487c&query="'



        const url = `https://api.themoviedb.org/3/movie/now_playing?api_key=af224ec1282df7f97fcdecabe78c99ad&language=en-JP&page=1`;

        //非同期関数。引数dirで、ボタンのdata値入れて、取得APIのURLを判別させる。
        const getMovieData = async (dir) => {
            // URLの取得（サイトで登録したキー含む）
            const url = `https://api.themoviedb.org/3/movie/${dir}?api_key=af224ec1282df7f97fcdecabe78c99ad&language=en-ja&page=1`;

            const json = await fetch(url)
                .then((response) => {
                    console.log('これは非同期処理成功!');
                    return response.json();
                    console.log(response.json);
                })
                .catch(error => {
                    console.error('これは非同期処理失敗!', error);
                    return null;
                });

            console.log(json.results);

            json.results.map((movie) => {
                let listContent = `
	<li class="card isFade">
		<a href="https://www.themoviedb.org/movie/${movie.id}" target="_blank" rel="noopener">
			<p class="mvTitle">${movie.title}</p>
			<img src="${mvImgSrc}" class="mvImg">
		</a>
	</li>
`;
                console.log(listContent);

            })
        }

        getMovieData("now_playing");



        const title = [];
        title.push
            (`<p>${response.json.original_title}</p>`);
        $("main").html();


    </script>


</body>

</html>